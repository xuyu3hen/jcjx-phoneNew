# è‡ªåŠ¨åŒ–å‘å¸ƒæµç¨‹å¿«é€Ÿå¼€å§‹æŒ‡å—

## ğŸ¯ æ¦‚è¿°

æœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨å¿«é€Ÿä¸Šæ‰‹é¡¹ç›®çš„è‡ªåŠ¨åŒ–å‘å¸ƒæµç¨‹ã€‚

## âš¡ 5åˆ†é’Ÿå¿«é€Ÿå¼€å§‹

### 1. å‡†å¤‡å·¥ä½œ

ç¡®ä¿å·²å®‰è£…ï¼š
- âœ… Flutter SDK
- âœ… Git
- âœ… Dart SDKï¼ˆé€šå¸¸éš Flutter ä¸€èµ·å®‰è£…ï¼‰

### 2. é¦–æ¬¡ä½¿ç”¨ï¼ˆLinux/macOSï¼‰

```bash
# èµ‹äºˆè„šæœ¬æ‰§è¡Œæƒé™
chmod +x scripts/*.sh
```

### 3. å‘å¸ƒæ–°ç‰ˆæœ¬

#### æ–¹å¼ä¸€ï¼šè‡ªåŠ¨åŒ–å‘å¸ƒï¼ˆæ¨èï¼‰

```bash
# Windows
scripts\release.bat

# Linux/macOS
./scripts/release.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨å®Œæˆï¼š
1. æ£€æŸ¥å·¥ä½œåŒº
2. è¿è¡Œæµ‹è¯•
3. é€’å¢ç‰ˆæœ¬å·
4. æäº¤ä»£ç 
5. åˆ›å»ºæ ‡ç­¾
6. æ¨é€ä»£ç ï¼ˆå¯é€‰ï¼‰

#### æ–¹å¼äºŒï¼šæ‰‹åŠ¨å‘å¸ƒ

```bash
# 1. æ›´æ–°ç‰ˆæœ¬å·
dart scripts/bump_version.dart

# 2. æäº¤ç‰ˆæœ¬å·å˜æ›´
git add pubspec.yaml
git commit -m "chore: æ›´æ–°ç‰ˆæœ¬å·"

# 3. åˆ›å»ºæ ‡ç­¾
git tag -a v1.1.9 -m "å‘å¸ƒç‰ˆæœ¬ 1.1.9"

# 4. æ¨é€
git push
git push --tags
```

### 4. CI/CD è‡ªåŠ¨æ„å»º

æ¨é€æ ‡ç­¾åï¼ŒCI/CD ä¼šè‡ªåŠ¨ï¼š
- æ„å»º APK/AAB/IPA
- ä¸Šä¼ æ„å»ºäº§ç‰©
- åˆ›å»º Releaseï¼ˆå¦‚æœé…ç½®ï¼‰

## ğŸ“‹ å¸¸ç”¨å‘½ä»¤

### ç‰ˆæœ¬ç®¡ç†

```bash
# æŸ¥çœ‹å½“å‰ç‰ˆæœ¬
grep "^version:" pubspec.yaml

# é€’å¢ä¿®è®¢ç‰ˆæœ¬å·ï¼ˆ1.1.8 â†’ 1.1.9ï¼‰
dart scripts/bump_version.dart

# é€’å¢æ¬¡ç‰ˆæœ¬å·ï¼ˆ1.1.8 â†’ 1.2.0ï¼‰
dart scripts/bump_version.dart minor

# é€’å¢ä¸»ç‰ˆæœ¬å·ï¼ˆ1.1.8 â†’ 2.0.0ï¼‰
dart scripts/bump_version.dart major

# åªé€’å¢æ„å»ºå·ï¼ˆ1.1.8+18 â†’ 1.1.8+19ï¼‰
dart scripts/bump_version.dart build
```

### æœ¬åœ°æ„å»º

```bash
# Windows
scripts\build.bat release android apk

# Linux/macOS
./scripts/build.sh release android apk
```

### æŸ¥çœ‹æ„å»ºäº§ç‰©

æ„å»ºå®Œæˆåï¼Œæ–‡ä»¶ä½äºï¼š
- **APK**: `build/app/outputs/flutter-apk/app-env_release-release.apk`
- **App Bundle**: `build/app/outputs/bundle/env_releaseRelease/app-env_release-release.aab`

## ğŸ”„ å®Œæ•´å‘å¸ƒæµç¨‹ç¤ºä¾‹

```bash
# 1. ç¡®ä¿ä»£ç å·²æäº¤
git status

# 2. è¿è¡Œè‡ªåŠ¨åŒ–å‘å¸ƒè„šæœ¬
./scripts/release.sh patch

# 3. ç¡®è®¤æ¨é€ï¼ˆè¾“å…¥ yï¼‰
# è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
#   - æ›´æ–°ç‰ˆæœ¬å·
#   - æäº¤å˜æ›´
#   - åˆ›å»ºæ ‡ç­¾
#   - æ¨é€ä»£ç 

# 4. ç­‰å¾… CI/CD æ„å»ºå®Œæˆ
# åœ¨ GitHub/GitLab æŸ¥çœ‹æ„å»ºçŠ¶æ€

# 5. ä¸‹è½½æ„å»ºäº§ç‰©
# ä» CI/CD å¹³å°ä¸‹è½½æˆ–ä» Release é¡µé¢ä¸‹è½½

# 6. æµ‹è¯•æ„å»ºäº§ç‰©
# å®‰è£…åˆ°è®¾å¤‡è¿›è¡Œæµ‹è¯•

# 7. å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œå‘å¸ƒå®Œæˆï¼
```

## ğŸ¨ ç‰ˆæœ¬å·é€‰æ‹©æŒ‡å—

### ä½•æ—¶é€’å¢ä¿®è®¢ç‰ˆæœ¬å·ï¼ˆPatchï¼‰ï¼Ÿ
- âœ… Bug ä¿®å¤
- âœ… å°åŠŸèƒ½ä¼˜åŒ–
- âœ… æ€§èƒ½æ”¹è¿›
- âœ… æ–‡æ¡£æ›´æ–°

**ç¤ºä¾‹**: `1.1.8` â†’ `1.1.9`

### ä½•æ—¶é€’å¢æ¬¡ç‰ˆæœ¬å·ï¼ˆMinorï¼‰ï¼Ÿ
- âœ… æ–°åŠŸèƒ½æ·»åŠ 
- âœ… API æ–°å¢ï¼ˆå‘åå…¼å®¹ï¼‰
- âœ… åŠŸèƒ½å¢å¼º

**ç¤ºä¾‹**: `1.1.8` â†’ `1.2.0`

### ä½•æ—¶é€’å¢ä¸»ç‰ˆæœ¬å·ï¼ˆMajorï¼‰ï¼Ÿ
- âœ… é‡å¤§æ¶æ„å˜æ›´
- âœ… ä¸å…¼å®¹çš„ API ä¿®æ”¹
- âœ… é‡å¤§åŠŸèƒ½é‡æ„

**ç¤ºä¾‹**: `1.1.8` â†’ `2.0.0`

## â“ å¸¸è§é—®é¢˜

### Q: å‘å¸ƒè„šæœ¬æ‰§è¡Œå¤±è´¥ï¼Ÿ

**æ£€æŸ¥æ¸…å•ï¼š**
1. å·¥ä½œåŒºæ˜¯å¦æœ‰æœªæäº¤çš„æ›´æ”¹ï¼Ÿ
2. æ˜¯å¦åœ¨æ­£ç¡®çš„åˆ†æ”¯ä¸Šï¼Ÿ
3. ç‰ˆæœ¬å·æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼Ÿ
4. Git é…ç½®æ˜¯å¦æ­£ç¡®ï¼Ÿ

### Q: CI/CD æ²¡æœ‰è‡ªåŠ¨æ„å»ºï¼Ÿ

**å¯èƒ½åŸå› ï¼š**
1. æ ‡ç­¾æ ¼å¼ä¸æ­£ç¡®ï¼ˆåº”è¯¥æ˜¯ `v1.1.8` æ ¼å¼ï¼‰
2. CI/CD é…ç½®æœªå¯ç”¨
3. æƒé™é—®é¢˜

**è§£å†³æ–¹æ³•ï¼š**
- æ£€æŸ¥ `.github/workflows/build-and-release.yml` æˆ– `.gitlab-ci.yml`
- æŸ¥çœ‹ CI/CD è¿è¡Œæ—¥å¿—

### Q: å¦‚ä½•å›é€€ç‰ˆæœ¬ï¼Ÿ

```bash
# 1. åˆ é™¤é”™è¯¯çš„æ ‡ç­¾
git tag -d v1.1.9
git push origin :refs/tags/v1.1.9

# 2. ä¿®æ”¹ pubspec.yaml ä¸­çš„ç‰ˆæœ¬å·
# 3. é‡æ–°æäº¤å’Œåˆ›å»ºæ ‡ç­¾
```

## ğŸ“– æ›´å¤šä¿¡æ¯

- è¯¦ç»†æ–‡æ¡£ï¼š[RELEASE_PROCESS.md](RELEASE_PROCESS.md)
- æ„å»ºè„šæœ¬ï¼š[scripts/build.sh](scripts/build.sh)
- CI/CD é…ç½®ï¼š[.github/workflows/build-and-release.yml](../.github/workflows/build-and-release.yml)

## ğŸ†˜ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š
1. æŸ¥çœ‹ [RELEASE_PROCESS.md](RELEASE_PROCESS.md) è¯¦ç»†æ–‡æ¡£
2. æ£€æŸ¥ CI/CD æ„å»ºæ—¥å¿—
3. è”ç³»å›¢é˜Ÿè´Ÿè´£äºº
