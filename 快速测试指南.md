# 机车入段功能快速测试指南

## 应用启动后测试步骤

### 1. 进入功能页面
1. 打开应用后，登录系统
2. 在主页找到"机车入段"模块
3. 点击"新增入修"按钮，进入机车入段页面

### 2. 基础功能测试

#### 测试步骤1：检查页面加载
- ✅ 页面标题应显示"机车入段"
- ✅ 底部应显示"新增入段"按钮
- ✅ 所有表单字段应正常显示

#### 测试步骤2：测试数据加载
- ✅ 动力类型列表应自动加载
- ✅ 配属段列表应自动加载
- ✅ 检修地点列表应自动加载
- ✅ 修程列表应自动加载

#### 测试步骤3：测试表单填写

**3.1 选择动力类型**
- 点击"动力类型"字段
- 从列表中选择一个动力类型（如：电力、内燃等）
- 验证：选择后，机型列表应自动更新

**3.2 选择机型**
- 点击"机型"字段
- 从列表中选择一个机型
- 验证：选择后能正确显示

**3.3 输入车号（重点测试）**
- 在"车号"输入框中输入一个有效的车号
- **验证点**：
  - 输入车号后，系统应自动查询并填充以下信息：
    - 机型（自动填充）
    - 修程（自动填充）
    - 修次（自动填充）
    - 配属段（自动填充）
  - 如果车号不存在，应显示提示："该车号无检修计划，请手动填写相关信息"
  - 如果车号已入段，应显示提示："该车已经入段，请不要重复入段"

**3.4 选择配属段**
- 如果车号未自动填充，手动点击"配属段"字段
- 从列表中选择一个配属段
- 验证：选择后能正确显示

**3.5 选择修程**
- 如果车号未自动填充，手动点击"修程"字段
- 从列表中选择一个修程
- 验证：选择后，修次列表应自动更新

**3.6 选择修次**
- 点击"修次"字段
- 从列表中选择一个修次
- 验证：选择后能正确显示

**3.7 选择检修地点**
- 点击"检修地点"字段
- 从列表中选择一个检修地点
- 验证：选择后应显示格式为"部门-轨道号-区域名"

**3.8 选择朝向**
- 点击"朝向"字段
- 选择"南"或"北"
- 验证：选择后能正确显示

**3.9 上传图片（重点测试）**
- 点击"车号及防溜情况确认"区域的图片选择器
- 选择1-4张图片
- **验证点**：
  - 图片能够正常选择
  - 选择的图片能够正确显示
  - 最多可以选择4张图片
  - 能够删除已选择的图片

#### 测试步骤4：测试表单验证

依次测试以下验证场景：

1. **不填写车号**
   - 直接点击"新增入段"按钮
   - 预期：显示"请填写车号"提示

2. **不填写配属段**
   - 填写车号，但不填写配属段
   - 点击"新增入段"按钮
   - 预期：显示"请填写配属段"提示

3. **不填写修程**
   - 填写车号和配属段，但不填写修程
   - 点击"新增入段"按钮
   - 预期：显示"请填写修程"提示

4. **不填写修次**
   - 填写车号、配属段、修程，但不填写修次
   - 点击"新增入段"按钮
   - 预期：显示"请填写修次"提示

5. **不填写检修地点**
   - 填写其他必填项，但不填写检修地点
   - 点击"新增入段"按钮
   - 预期：显示"请填写检修地点"提示

6. **不填写朝向**
   - 填写其他必填项，但不填写朝向
   - 点击"新增入段"按钮
   - 预期：显示"请填写朝向"提示

7. **不上传图片**
   - 填写所有必填项，但不上传图片
   - 点击"新增入段"按钮
   - 预期：显示"请填写检修图片"提示

#### 测试步骤5：测试提交功能

**正常提交测试：**
1. 填写所有必填字段：
   - 动力类型
   - 机型
   - 车号
   - 配属段
   - 修程
   - 修次
   - 检修地点
   - 朝向
   - 上传至少1张图片

2. 点击"新增入段"按钮

3. **验证点**：
   - 按钮应显示加载状态（CircularProgressIndicator）
   - 应显示"正在入段"的加载提示
   - 提交成功后应显示"机车入段提报成功"对话框
   - 点击"确定"后应返回上一页
   - 提交成功后，图片列表应被清空

**异常情况测试：**
1. **网络异常测试**
   - 断开网络连接
   - 尝试提交
   - 预期：显示网络错误提示

2. **重复提交测试**
   - 快速连续点击"新增入段"按钮
   - 预期：只提交一次，按钮显示加载状态

3. **服务器错误测试**
   - 如果服务器返回错误（如车号已存在等）
   - 预期：显示相应的错误提示信息

## 测试检查清单

### 功能完整性
- [ ] 所有字段都能正常选择和填写
- [ ] 车号自动填充功能正常工作
- [ ] 表单验证功能正常
- [ ] 图片上传功能正常
- [ ] 提交功能正常

### 错误处理
- [ ] 车号不存在时显示友好提示
- [ ] 车号已入段时显示友好提示
- [ ] 网络错误时显示友好提示
- [ ] 表单验证提示清晰明确

### 用户体验
- [ ] 加载状态有明确反馈
- [ ] 操作流畅，无卡顿
- [ ] 提示信息清晰易懂
- [ ] 界面布局合理

## 测试数据建议

### 有效测试数据
- 准备一个有效的车号用于正常流程测试
- 准备一个已入段的车号用于重复入段测试
- 准备一个不存在的车号用于错误处理测试

### 图片测试
- 准备1-4张测试图片
- 测试不同格式的图片（如果支持）
- 测试图片大小限制（如果有）

## 常见问题排查

1. **数据加载失败**
   - 检查网络连接
   - 检查后端API是否正常
   - 查看控制台日志

2. **车号自动填充不工作**
   - 检查车号是否正确
   - 检查后端API返回的数据格式
   - 查看控制台日志中的错误信息

3. **图片上传失败**
   - 检查图片文件是否有效
   - 检查网络连接
   - 检查后端文件上传接口是否正常

4. **提交失败**
   - 检查所有必填字段是否都已填写
   - 检查网络连接
   - 查看控制台日志中的错误信息

## 测试完成后

请记录以下信息：
- 测试过程中发现的问题
- 功能是否按预期工作
- 需要改进的地方
- 测试环境信息（设备型号、系统版本等）

